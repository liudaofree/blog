# redis常见的问题

## 缓存击穿

- ### 概念： 

  - 缓存击穿是指某个缓存键对应的数据在缓存层失效的瞬间，有大量并发请求同时访问该缓存键，导致这些请求直接访问数据库，增加了数据库的负担。

- ### 原因：

  -  缓存失效导致大量请求直接访问数据库，无法有效分散并发请求。

- ### 解决方案：

  - 使用互斥锁或分布式锁，保证在缓存失效的情况下，只有一个请求能够访问数据库，其他请求等待结果。
  - 使用缓存预热，提前加载热点数据到缓存中，减少缓存失效时的并发请求。
  - 使用布隆过滤器用以保证系统中不存在的数据一定不存在

## 缓存穿透

- ### 概念：

  -  缓存穿透是指一个恶意请求或者大量请求查询一个不存在于缓存中的数据，导致这些请求都穿过缓存层直接访问数据库，从而引起数据库压力过大。

- ### 原因：

  - 通常是由于缓存没有命中，而查询的数据又不存在于数据库中，导致每次查询都需要访问数据库，增加了数据库负担。

- ### 解决方案：

  - 使用布隆过滤器等数据结构，在缓存层对查询的数据进行初步的过滤，避免无效的查询进入数据库。
  - 对于查询结果为空的情况，也可以将空结果进行缓存，但需要设置一个较短的过期时间，防止缓存一直存储无效数据。

## 缓存雪崩

- ### 概念：

  -  缓存雪崩是指缓存层中大量缓存同时失效，导致大量请求直接访问数据库，引起数据库负载剧增，系统性能急剧下降。

- ## 原因：

  -  缓存数据在同一时间大规模失效，可能是由于相同的过期时间设置或者缓存层故障引起。

- ### 解决方案：

  - 设置不同的过期时间，避免缓存同时失效。
  - 使用缓存数据的时候，实时检测缓存的有效性，如果失效，则更新缓存并重新计算过期时间。
  - 使用分布式缓存，将缓存数据分散到不同的节点，降低缓存失效的风险。

## 一致性问题

- 概念:
  - 缓存中的数据和数据库中的数据不一致